{
// CGRateS Configuration file
//
// Used for cgradmin
// Starts rater, scheduler

"listen": {
	"rpc_json": ":2012",				// RPC JSON listening address
	"rpc_gob": ":2013",					// RPC GOB listening address
	"http": ":2080",					// HTTP listening address
},

"rater": {
	"enabled": true,					// enable Rater service: <true|false>
	"cdrstats": "internal",				// address where to reach the cdrstats service, empty to disable stats functionality<""|internal|x.y.z.y:1234>
	"pubsubs": "internal",				// address where to reach the pubusb service, empty to disable pubsub functionality: <""|internal|x.y.z.y:1234>
	"users": "internal",				// address where to reach the user service, empty to disable user profile functionality: <""|internal|x.y.z.y:1234>
	"aliases": "internal",
},

"scheduler": {
	"enabled": true,					// start Scheduler service: <true|false>
},

"cdrs": {
	"enabled": true,					// start the CDR Server service:  <true|false>
	"rater": "internal",				// address where to reach the Rater for cost calculation, empty to disable functionality: <""|internal|x.y.z.y:1234>
	"cdrstats": "internal",				// address where to reach the cdrstats service, empty to disable stats functionality<""|internal|x.y.z.y:1234>
},

"cdrstats": {
	"enabled": true,					// starts the cdrstats service: <true|false>
},

"pubsubs": {
	"enabled": true,				// starts PubSub service: <true|false>.
},

"aliases": {
	"enabled": true,				// starts Aliases service: <true|false>.
},

"users": {
	"enabled": true,				// starts User service: <true|false>.
	"indexes": ["Uuid"],			// user profile field indexes
},

"sm_generic": {
	"enabled": true,						// starts SessionManager service: <true|false>
	"rater": "internal",					// address where to reach the Rater <""|internal|127.0.0.1:2013>
	"cdrs": "internal",						// address where to reach CDR Server <""|internal|x.y.z.y:1234>
},

"diameter_agent": {
	"enabled": true,					// enables the diameter agent: <true|false>
	"listen": "127.0.0.1:3868",			// address where to listen for diameter requests <x.y.z.y:1234>
	//"dictionaries_dir": "",	// path towards directory holding additional dictionaries to load
	"request_processors": [
		{
			"id": "*default",									// formal identifier of this processor
			"dry_run": false,									// do not send the CDRs to CDRS, just parse them
			"request_filter": "Subscription-Id>Subscription-Id-Type(0)",		// filter requests processed by this processor
			"continue_on_success": false,				// continue to the next template if executed
			"content_fields":[							// import content_fields template, tag will match internally CDR field, in case of .csv value will be represented by index of the field value
				{"tag": "tor", "field_id": "TOR", "type": "*composed", "value": "^*voice", "mandatory": true},
				{"tag": "accid", "field_id": "AccId", "type": "*composed", "value": "Session-Id", "mandatory": true},
				{"tag": "reqtype", "field_id": "ReqType", "type": "*composed", "value": "^*users", "mandatory": true},
				{"tag": "direction", "field_id": "Direction", "type": "*composed", "value": "^*out", "mandatory": true},
				{"tag": "tenant", "field_id": "Tenant", "type": "*composed", "value": "^*users", "mandatory": true},
				{"tag": "category", "field_id": "Category", "type": "*composed", "value": "^call_;~Service-Information>IN-Information>Calling-Vlr-Number:s/^$/33000/;~Service-Information>IN-Information>Calling-Vlr-Number:s/^(\\d{5})/${1}/", "mandatory": true},
				{"tag": "account", "field_id": "Account", "type": "*composed", "value": "^*users", "mandatory": true},
				{"tag": "subject", "field_id": "Subject", "type": "*composed", "value": "^*users", "mandatory": true},
				{"tag": "destination", "field_id": "Destination", "type": "*composed", "value": "Service-Information>IN-Information>Real-Called-Number", "mandatory": true},
				{"tag": "setup_time", "field_id": "SetupTime", "type": "*composed", "value": "Event-Timestamp", "mandatory": true},
				{"tag": "answer_time", "field_id": "AnswerTime", "type": "*composed", "value": "Event-Timestamp", "mandatory": true},
				{"tag": "usage", "field_id": "Usage", "type": "*composed", "value": "Requested-Service-Unit>CC-Time", "mandatory": true},
				{"tag": "subscriber_id", "field_id": "SubscriberId", "type": "*composed", "value": "Subscription-Id>Subscription-Id-Data", "mandatory": true},
			],
		},
	],
},

}
