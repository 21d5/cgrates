{

"diameter_agent": {
	"request_processors": [

		{
			"id": "dryrun1",
			"filters": ["*string:*vars.cmd:*ccr", "*string:*req.Service-Context-Id:gprs"],
			"flags": ["*dryrun"],
			"request_fields":[
				{"tag": "TOR", "field_id": "ToR", "type": "*constant", "value": "*sms"},
				{"tag": "OriginID", "field_id": "OriginID", "type": "*composed", 
					"value": "~*req.Session-Id", "mandatory": true},
				{"tag": "RequestType", "field_id": "RequestType", "type": "*constant", "value": "*prepaid"},
				{"tag": "SetupTime", "field_id": "SetupTime", "type": "*composed", "value": "~*req.Event-Timestamp", "mandatory": true},
			],
			"reply_fields":[
				{"tag": "CCATemplate", "type": "*template", "value": "*cca"},
				{"tag": "ResultCode", "field_id": "Result-Code", "type": "*constant", "value": "300"},
			],
		},

		{
			"id": "message",
			"filters": ["*string:*vars.cmd:*ccr", "*prefix:*req.Service-Context-Id:message",
				"*string:*req.CC-Request-Type:4"],
			"flags": ["*event", "*accounts"],
			"request_fields":[
				{"tag": "TOR", "field_id": "ToR", "type": "*constant", "value": "*sms"},
				{"tag": "OriginID", "field_id": "OriginID", "type": "*composed", 
					"value": "~*req.Session-Id", "mandatory": true},
				{"tag": "RequestType", "field_id": "RequestType", "type": "*constant", "value": "*prepaid"},
				{"tag": "Account", "field_id": "Account", "type": "*composed", "mandatory": true, 
					"value": "~*req.Subscription-Id.Subscription-Id-Data[~Subscription-Id-Type(0)]"},
				{"tag": "Subject", "field_id": "Subject", "type": "*composed", "mandatory": true, 
					"value": "~*req.Subscription-Id.Subscription-Id-Data[~Subscription-Id-Type(0)]"},
				{"tag": "Destination", "field_id": "Destination", "type": "*composed", "mandatory": true, 
					"value": "~*req.Service-Information.SMS-Information.Recipient-Address.Address-Data"},
				{"tag": "SetupTime", "field_id": "SetupTime", "type": "*composed", 
					"value": "~*req.Event-Timestamp", "mandatory": true},
				{"tag": "AnswerTime", "field_id": "AnswerTime", "type": "*composed", 
					"value": "~*req.Event-Timestamp", "mandatory": true},
				{"tag": "Usage", "field_id": "Usage", "type": "*composed", 
					"value": "~*req.Requested-Service-Unit.CC-Time", "mandatory": true},
			],
			"reply_fields":[
				{"tag": "ResultCode",  "filters": ["*string.*cgrep.Error:ACCOUNT_NOT_FOUND"], 
					"field_id": "Result-Code", "type": "*constant", "value": "5030", "break": true},
				{"tag": "ResultCode",  "filters": ["*string.*cgrep.Error:USER_NOT_FOUND"], 
					"field_id": "Result-Code", "type": "*constant", "value": "5030", "break": true},
			],
		},
		
	],
},

}

